<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Spicy Group Game</title>
    <style>
        :root { --wa-green: #25D366; --wa-dark: #075E54; --truth-blue: #34B7F1; --dare-pink: #e91e63; }
        
        /* Forces a single centered view and removes side-scrolling */
        body { 
            font-family: 'Segoe UI', Helvetica, Arial, sans-serif; 
            background-color: var(--wa-dark); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
            padding: 10px;
            box-sizing: border-box;
            overflow: hidden;
        }
        
        .card { 
            background: white; 
            padding: 20px; 
            border-radius: 25px; 
            width: 100%; 
            max-width: 400px; 
            text-align: center; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.4); 
            box-sizing: border-box;
            z-index: 10;
        }
        
        .wheel-outer { 
            position: relative; 
            width: 280px; 
            height: 280px; 
            margin: 15px auto; 
        }
        
        #wheel { 
            width: 100%; height: 100%; 
            border-radius: 50%; 
            border: 8px solid #222; 
            position: relative; 
            overflow: hidden; 
            transition: transform 4s cubic-bezier(0.1, 0, 0.1, 1); 
            background: #eee; 
        }
        
        /* Improved Arrow placement */
        #arrow { 
            position: absolute; top: 50%; left: 50%; 
            width: 8px; height: 130px; 
            background: #222; 
            margin-top: -65px; margin-left: -4px; 
            border-radius: 10px; 
            z-index: 20; 
            transition: transform 4s cubic-bezier(0.1, 0, 0.1, 1); 
            pointer-events: none; 
        }
        #arrow::after { content: 'â–²'; position: absolute; top: -16px; left: -8px; color: #ff0000; font-size: 24px; }

        .player-name { position: absolute; font-weight: 800; font-size: 10px; background: white; padding: 2px 5px; border-radius: 4px; transform: translate(-50%, -50%); z-index: 25; border: 1px solid #ddd; text-transform: uppercase; white-space: nowrap; }

        #announcement { margin-top: 15px; padding: 15px; border-radius: 15px; background: #f9f9f9; display: none; border: 2px solid var(--wa-green); }

        .btn { border: none; border-radius: 12px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; }
        .btn-spin { background: var(--wa-green); color: white; font-size: 1.3rem; padding: 18px; box-shadow: 0 5px 0 #128C7E; }
        .btn-wa { background: var(--wa-dark); color: white; padding: 15px; margin-top: 5px; }
        
        textarea { width: 100%; box-sizing: border-box; padding: 10px; border-radius: 10px; border: 1px solid #ccc; margin-top: 10px; font-size: 16px; }
        .type-pill { display: inline-block; padding: 4px 15px; border-radius: 20px; color: white; font-weight: bold; font-size: 0.8rem; margin: 8px 0; }
    </style>
</head>
<body>

<div class="card">
    <h2 style="margin:0; color:var(--wa-dark);">Group Spicy Spin</h2>
    <div style="font-size: 0.8rem; color: #888; margin-bottom: 5px;">Alexander, Roes, Vivian, Shawn, Disway, Mac Lord</div>

    <div class="wheel-outer" id="wheelBox">
        <div id="wheel"></div>
        <div id="arrow"></div>
    </div>

    <button class="btn btn-spin" id="spinBtn" onclick="spin()">SPIN THE BOTTLE</button>

    <div id="announcement">
        <span id="victim" style="font-size:1.5rem; font-weight:bold; color:var(--wa-dark);"></span><br>
        <div id="typePill" class="type-pill"></div>
        <div id="prompt" style="font-style:italic; margin:10px 0; color:#444;"></div>
        <textarea id="answer" rows="2" placeholder="Write answer here..."></textarea>
        <button class="btn btn-wa" onclick="share()">Post to WhatsApp Group ðŸ’¬</button>
    </div>
</div>

<script>
    const players = ["Alexander", "Roes", "Vivian", "Shawn", "Disway", "Mac Lord"];
    let remaining = [...players];
    let rotation = 0;

    const truths = ["Who was your best kiss?", "Secret dating 'ick'?", "Describe a wild fantasy.", "Lied about being single?", "Celebrity 'hall pass'?", "Most embarrassing 'mood' moment?", "Liked an ex's old photo?", "Dirtiest text sent?", "One-night stand?", "First thing on a dating profile?"];
    const dares = ["Voice note: Spicy whisper.", "WhatsApp Status: 'Bedroom eyes' selfie.", "DM crush: 'Dreamed of you'.", "Send 10th photo in recents.", "Text ex 'I miss you' then delete.", "Send browser history screenshot."];

    // This makes the names appear the SECOND the code runs
    function draw() {
        const wheel = document.getElementById('wheel');
        const box = document.getElementById('wheelBox');
        document.querySelectorAll('.player-name').forEach(n => n.remove());
        
        const step = 360 / players.length;
        let segments = [];
        players.forEach((name, i) => {
            const color = (i % 2 === 0) ? '#f4f4f4' : '#ffffff';
            segments.push(`${color} ${i * step}deg ${(i + 1) * step}deg`);
            
            const angle = (i * step) + (step / 2);
            const x = 140 + 85 * Math.cos(Math.PI * (angle - 90) / 180);
            const y = 140 + 85 * Math.sin(Math.PI * (angle - 90) / 180);
            
            const label = document.createElement('div');
            label.className = 'player-name';
            label.style.left = x + 'px'; label.style.top = y + 'px';
            label.innerText = name;
            box.appendChild(label);
        });
        wheel.style.background = `conic-gradient(${segments.join(', ')})`;
    }

    function spin() {
        document.getElementById('announcement').style.display = "none";
        document.getElementById('spinBtn').disabled = true;

        if (remaining.length === 0) remaining = [...players];
        const target = remaining[Math.floor(Math.random() * remaining.length)];
        const targetIdx = players.indexOf(target);
        remaining = remaining.filter(p => p !== target);

        const step = 360 / players.length;
        const targetAngle = (targetIdx * step) + (step / 2);
        rotation += 1800 + (360 - (rotation % 360)) + (360 - targetAngle);
        
        document.getElementById('arrow').style.transform = `rotate(${rotation}deg)`;
        
        setTimeout(() => {
            document.getElementById('spinBtn').disabled = false;
            const isT = Math.random() > 0.5;
            const list = isT ? truths : dares;
            const prompt = list[Math.floor(Math.random() * list.length)];
            
            document.getElementById('victim').innerText = target;
            document.getElementById('prompt').innerText = `"${prompt}"`;
            const pill = document.getElementById('typePill');
            pill.innerText = isT ? "TRUTH" : "DARE";
            pill.style.backgroundColor = isT ? 'var(--truth-blue)' : 'var(--dare-pink)';
            document.getElementById('announcement').style.display = "block";
        }, 4000);
    }

    function share() {
        const text = `*CHALLENGE*\nðŸ‘¤ *Target:* ${document.getElementById('victim').innerText}\nðŸ“œ *Prompt:* ${document.getElementById('prompt').innerText}\nðŸ’¬ *Answer:* ${document.getElementById('answer').value || "Done!"}`;
        window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
    }

    // Run draw immediately
    draw();
</script>
</body>
</html>

